<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QCM & Exercices â€“ Logarithmes</title>
  <link rel="stylesheet" href="styles.css">
  <script defer src="script.js"></script>
</head>

<body>
  <canvas class="bg"></canvas>

  <nav>
    <div class="inner">
      <div class="brand">ğŸ§  QCM & Exercices</div>
      <div class="row">
        <a href="index.html" class="btn">ğŸ  Accueil</a>
        <a href="cours.html" class="btn">ğŸ“ Cours</a>
        <a href="fiche.html" class="btn">ğŸ“„ Fiche</a>
      </div>
    </div>
  </nav>

  <div class="container">
    <section class="card" style="text-align:center;">
      <h1>Teste ta comprÃ©hension</h1>
      <p style="color:#a9b6cc;">RÃ©ponds aux questions. Si tu te trompes, le site tâ€™explique automatiquement.</p>

      <div class="row" style="justify-content:center; gap:10px;">
        <button id="startQuiz" class="btn vert">â–¶ï¸ DÃ©marrer le test (10 QCM)</button>
        <button id="startTrain" class="btn accent">â™¾ï¸ EntraÃ®nement rapide</button>
      </div>
    </section>

    <div id="quizArea" class="card" style="display:none; text-align:center;">
      <h2 id="qTitle">Question</h2>
      <p id="qText" style="font-size:20px;"></p>
      <div id="options" class="grid" style="margin-top:10px;"></div>
      <div id="feedback" class="small" style="margin-top:10px; min-height:20px;"></div>

      <button id="nextBtn" class="btn" style="display:none;">Question suivante âœ</button>
    </div>

    <div id="scoreArea" class="card" style="display:none; text-align:center;">
      <h2>RÃ©sultat</h2>
      <p id="scoreText" style="font-size:20px;"></p>
      <div style="height:10px; background:#1d2a44; border-radius:10px; margin:10px 0;">
        <div id="scoreBar" style="height:10px; background:#67ddb5; border-radius:10px; width:0%;"></div>
      </div>
      <button id="retryBtn" class="btn accent">Rejouer ğŸ”</button>
    </div>
  </div>

  <footer>
    Site crÃ©Ã© par <span>spilerixoff</span> â€“ pour comprendre avant de rÃ©ussir âš¡
  </footer>

  <script>
    /* ========= QCM et entraÃ®nement ========= */
    const questions = [
      { q: "logâ‚‚(8) = ?", options: ["2", "3", "4"], correct: 1, exp: "2Â³ = 8 â†’ logâ‚‚(8) = 3" },
      { q: "logâ‚â‚€(100) = ?", options: ["10", "2", "100"], correct: 1, exp: "10Â² = 100 â†’ logâ‚â‚€(100) = 2" },
      { q: "logâ‚ƒ(27) = ?", options: ["9", "3", "2"], correct: 1, exp: "3Â³ = 27 â†’ logâ‚ƒ(27) = 3" },
      { q: "logâ‚„(16) = ?", options: ["2", "3", "4"], correct: 1, exp: "4Â² = 16 â†’ logâ‚„(16) = 2" },
      { q: "logâ‚‚(32) = ?", options: ["5", "4", "6"], correct: 0, exp: "2âµ = 32 â†’ logâ‚‚(32) = 5" },
      { q: "logâ‚…(25) = ?", options: ["2", "3", "4"], correct: 0, exp: "5Â² = 25 â†’ logâ‚…(25) = 2" },
      { q: "logâ‚â‚€(1000) = ?", options: ["2", "3", "4"], correct: 1, exp: "10Â³ = 1000 â†’ logâ‚â‚€(1000) = 3" },
      { q: "logâ‚â‚€(1) = ?", options: ["0", "1", "2"], correct: 0, exp: "10â° = 1 â†’ logâ‚â‚€(1) = 0" },
      { q: "logâ‚‚(1/8) = ?", options: ["âˆ’2", "âˆ’3", "2"], correct: 1, exp: "2â»Â³ = 1/8 â†’ logâ‚‚(1/8) = âˆ’3" },
      { q: "logâ‚ƒ(9Ã—3) = ?", options: ["3", "4", "5"], correct: 1, exp: "logâ‚ƒ(9) + logâ‚ƒ(3) = 2 + 1 = 3 â†’ logâ‚ƒ(27)=3" }
    ];

    let current = 0, score = 0, training = false;

    const qTitle = document.getElementById("qTitle");
    const qText = document.getElementById("qText");
    const options = document.getElementById("options");
    const feedback = document.getElementById("feedback");
    const nextBtn = document.getElementById("nextBtn");
    const quizArea = document.getElementById("quizArea");
    const scoreArea = document.getElementById("scoreArea");
    const scoreText = document.getElementById("scoreText");
    const scoreBar = document.getElementById("scoreBar");

    document.getElementById("startQuiz").onclick = () => startQuiz(false);
    document.getElementById("startTrain").onclick = () => startQuiz(true);
    document.getElementById("retryBtn").onclick = resetQuiz;
    nextBtn.onclick = nextQuestion;

    function startQuiz(train) {
      training = train;
      current = 0;
      score = 0;
      scoreArea.style.display = "none";
      quizArea.style.display = "block";
      nextBtn.style.display = "none";
      showQuestion();
    }

    function showQuestion() {
      const q = questions[current];
      qTitle.textContent = "Question " + (current + 1);
      qText.textContent = q.q;
      options.innerHTML = "";
      feedback.textContent = "";

      q.options.forEach((opt, i) => {
        const btn = document.createElement("button");
        btn.className = "btn";
        btn.textContent = opt;
        btn.onclick = () => checkAnswer(i);
        options.appendChild(btn);
      });
    }

    function checkAnswer(i) {
      const q = questions[current];
      if (i === q.correct) {
        score++;
        feedback.style.color = "#67ddb5";
        feedback.textContent = "âœ”ï¸ Correct ! " + q.exp;
        voice.speak("Correct !");
      } else {
        feedback.style.color = "#ef476f";
        feedback.textContent = "âŒ Mauvaise rÃ©ponse. " + q.exp;
        voice.speak("Faux, Ã©coute bien lâ€™explication.");
      }

      nextBtn.style.display = "block";
      $$("button.btn").forEach(b => (b.disabled = true));
    }

    function nextQuestion() {
      if (training) {
        current = (current + 1) % questions.length;
        showQuestion();
        nextBtn.style.display = "none";
      } else {
        current++;
        if (current < questions.length) {
          showQuestion();
          nextBtn.style.display = "none";
        } else endQuiz();
      }
    }

    function endQuiz() {
      quizArea.style.display = "none";
      scoreArea.style.display = "block";
      const pct = Math.round((score / questions.length) * 100);
      scoreText.textContent = `Ton score : ${score}/${questions.length} (${pct}%)`;
      scoreBar.style.width = pct + "%";
      voice.speak(`Ton score est de ${pct} pour cent.`);
    }

    function resetQuiz() {
      scoreArea.style.display = "none";
      quizArea.style.display = "none";
    }
  </script>
</body>
</html>
