<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Graphique â€“ Exponentielle et Logarithme</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <canvas class="bg"></canvas>

  <nav>
    <div class="inner">
      <div class="brand">ğŸ“ˆ Graphique interactif</div>
      <div class="row">
        <a href="index.html" class="btn">ğŸ  Accueil</a>
        <a href="cours.html" class="btn">ğŸ“ Cours</a>
        <a href="exercices.html" class="btn">ğŸ§  QCM</a>
        <a href="fiche.html" class="btn">ğŸ“„ Fiche</a>
      </div>
    </div>
  </nav>

  <div class="container">
    <section class="card" style="text-align:center;">
      <h1>Exponentielle et Logarithme</h1>
      <p style="color:#a9b6cc;">
        Observe comment la courbe du logarithme est lâ€™image miroir de la courbe exponentielle.  
        Câ€™est ce quâ€™on appelle des fonctions <b>inverses</b>.
      </p>

      <label for="baseInput"><b>Changer la base :</b></label>
      <input id="baseInput" class="input" type="number" min="1.1" step="0.1" value="2" style="width:120px; text-align:center;">
      <button id="updateBase" class="btn vert">ğŸ” Mettre Ã  jour</button>
    </section>

    <div class="card" style="text-align:center;">
      <canvas id="logGraph" height="420"></canvas>
    </div>

    <div class="card">
      <h2>ğŸ§  InterprÃ©tation simple</h2>
      <ul>
        <li>La fonction <b>y = a<sup>x</sup></b> monte trÃ¨s vite.</li>
        <li>La fonction <b>y = logâ‚(x)</b> monte lentement au dÃ©but, puis de plus en plus vite.</li>
        <li>Elles sont symÃ©triques par rapport Ã  la droite <b>y = x</b>.</li>
        <li>Plus la base <b>a</b> est grande, plus les deux courbes changent de forme.</li>
      </ul>
      <div class="small" style="color:#a9b6cc;">
        ğŸ’¡ Le logarithme sert Ã  â€œcomprimerâ€ les grandes valeurs de lâ€™exponentielle.
      </div>
    </div>
  </div>

  <footer>
    Site crÃ©Ã© par <span>spilerixoff</span> â€“ pour comprendre avant de rÃ©ussir âš¡
  </footer>

  <script>
    const ctxG = document.getElementById('logGraph');
    const baseInput = document.getElementById('baseInput');
    const updateBtn = document.getElementById('updateBase');

    let graph;

    function genData(base) {
      const expData = [], logData = [];
      for (let x = -3; x <= 3; x += 0.1) expData.push({x, y: Math.pow(base, x)});
      for (let x = 0.1; x <= 10; x += 0.1) logData.push({x, y: Math.log(x) / Math.log(base)});
      return {expData, logData};
    }

    function drawGraph(base = 2) {
      const {expData, logData} = genData(base);
      if (graph) graph.destroy();
      graph = new Chart(ctxG, {
        type: 'scatter',
        data: {
          datasets: [
            {
              label: `y = ${base}^x (exponentielle)`,
              data: expData,
              borderColor: '#67ddb5',
              backgroundColor: '#67ddb580',
              showLine: true,
              tension: 0.2,
            },
            {
              label: `y = log_${base}(x) (logarithme)`,
              data: logData,
              borderColor: '#8a7dff',
              backgroundColor: '#8a7dff80',
              showLine: true,
              tension: 0.2,
            },
            {
              label: "y = x",
              data: Array.from({length:50}, (_,i)=>({x:i/5, y:i/5})),
              borderColor: '#ffd166',
              borderDash: [5,5],
              showLine: true,
              pointRadius: 0
            }
          ]
        },
        options: {
          scales: {
            x: {
              title: { display: true, text: "x", color: "#a9b6cc" },
              grid: { color: "#1d2a44" },
              ticks: { color: "#a9b6cc" }
            },
            y: {
              title: { display: true, text: "y", color: "#a9b6cc" },
              grid: { color: "#1d2a44" },
              ticks: { color: "#a9b6cc" }
            }
          },
          plugins: {
            legend: {
              labels: { color: "#a9b6cc" }
            }
          }
        }
      });
    }

    updateBtn.addEventListener('click', () => {
      const b = parseFloat(baseInput.value);
      if (b > 1) drawGraph(b);
    });

    drawGraph(2);
  </script>
</body>
</html>
